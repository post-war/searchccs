(this.webpackJsonpsearchccs=this.webpackJsonpsearchccs||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);a(97);var n=a(0),c=a.n(n),r=a(11),s=a.n(r),o=(a(102),a(103),a(67)),i=a(68),l=a(85),d=a(83),m=a(69),j=a.n(m),u=a(2),g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"signup",value:function(e){var t={token:e.accessToken,Name:e.name,Image:e.picture.data.url,groups:e.groups.data,ProviderId:"Facebook"};localStorage.setItem("userData",JSON.stringify(t)),this.props.history.push("/Dashboard")}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{style:{paddingTop:"20px"},className:"col-sm-12",children:[Object(u.jsx)("div",{className:"col-sm-4"}),Object(u.jsx)("div",{className:"col-sm-4",children:Object(u.jsx)(j.a,{buttonStyle:{padding:"6px"},appId:"194888908816770",autoLoad:!0,version:"10.0",fields:"name,picture,groups",callback:function(t){console.log(t),e.signup(t)}})}),Object(u.jsx)("div",{className:"col-sm-4"})]})})})}}]),a}(n.Component),f=a(84),p=a(41),b=a(70),h=a(141),x=a(144),O=a(146),v=a(112),w=a(153),y=a(156),k=a(150),C=a(151),_=a(157),S=a(158),N=a(154),I=a(152),F=a(148),T=a(147),E=a(75),M=a(81),B=a.n(M),D=a(80),L=a.n(D),J=a(77),P=a.n(J),R=a(79),z=a.n(R),U=a(78),W=a.n(U);var A=function(){var e=Object(n.useState)((function(){return JSON.parse(localStorage.getItem("userData"))})),t=Object(p.a)(e,2),a=t[0],r=(t[1],c.a.useState({data:[],hasMore:!0,nextPage:"first",first:!0})),s=Object(p.a)(r,2),o=s[0],i=s[1],l=c.a.useState(""),d=Object(p.a)(l,2),m=d[0],j=d[1],g=c.a.useState((function(){return JSON.parse(localStorage.getItem("selectedGroup"))})),M=Object(p.a)(g,2),D=M[0],J=M[1],R=Object(n.useRef)(0),U=c.a.useState(null),A=Object(p.a)(U,2),G=A[0],H=A[1],V=function(){H(null)},Y=Boolean(G),q=Y?"simple-popover":void 0;Object(n.useEffect)((function(){R.current++,console.log("in useEffect ".concat(R.current)),o.first&&window.FB.api("/"+D,"GET",{fields:"feed.limit(30){from,id,message,updated_time,permalink_url,comments.limit(10).filter(stream){created_time,from,message,id,like_count,comment_count,permalink_url},reactions,full_picture}"},(function(e){Q(e.feed)}))}));var K=Object(h.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",background:"linear-gradient(45deg, #fafafa 30%, #e3f2fd 90%)"},paper:{maxWidth:500,margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(1)},textField:{marginLeft:e.spacing(1)},typography:{padding:e.spacing(2)},form:{padding:e.spacing(0,3)},cftd:{backgroundColor:"#FF4500",height:"20px",width:"35px",color:"#FFFFFF"},iconButton:{padding:10},outerColumn:{borderRight:"1px solid grey",borderBottom:"1px solid grey",borderLeft:"1px solid grey"},centerColumn:{marginLeft:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:200},selectEmpty:{marginTop:e.spacing(2)}}})),Q=function(e){if(console.log(e),e)if(e.data){if(0===e.data.length){var t=Object.assign({},o);return t.hasMore=!1,void i(t)}var a=JSON.parse('{"grp" : [{"id":2222449363,"CFTD":"CFTD","COTM":"COTM"},{"id":115073638555897,"CFTD":"CFTD"}]}').grp.find((function(e){return e.id==D})),n=a&&a.CFTD||"____",c=a&&a.COTM||"____",r=new RegExp(n,"i"),s=new RegExp(c,"i"),l=new RegExp(m,"i"),d=0,j=Object.assign({},o);e.data.forEach((function(e,t,a){var n=r.test(e.message),c={fromName:e.from?e.from.name:"Unknown",fromId:e.from?e.from.id:"9999999999999999",id:e.id,message:e.message,updated_time:e.updated_time,comments:e.comments?e.comments.data.length:0,reactions:e.reactions?e.reactions.data.length:0,link:e.permalink_url,full_picture:e.full_picture?e.full_picture:"",cftd:n,cotm:s.test(e.message)||!!e.comments&&e.comments.data.some((function(e){return s.test(e.message)})),feed:!0,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};if(""===m)console.log("Selected ".concat(d++)),j.data.push(c),n&&c.comments>0&&e.comments.data.forEach((function(e,t,a){var n={fromName:e.from?e.from.name:"Unknown",fromId:e.from?e.from.id:"9999999999999999",id:e.id,message:e.message,updated_time:e.created_time,comments:e.comment_count,reactions:e.like_count,link:e.permalink_url,cftd:!0,cotm:s.test(e.message),feed:!1,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};console.log("Selected ".concat(d++)),j.data.push(n)}));else{var o=l.test(c.message),i=r.test(e.message);if(o)console.log("Selected ".concat(d++)),j.data.push(c);else if(c.comments>0){var u=!1;e.comments.data.forEach((function(e,t,a){var n=l.test(e.message);if(console.log("dtc.mess "+e.message),n){var r={fromName:e.from?e.from.name:"Unknown",fromId:e.from?e.from.id:"9999999999999999",id:e.id,message:e.message,updated_time:e.created_time,comments:e.comment_count,reactions:e.like_count,link:e.permalink_url,cftd:i,cotm:s.test(e.message),feed:!1,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};console.log("Selected ".concat(d++)),u||(j.data.push(c),u=!1),j.data.push(r)}}))}}})),j.first=!1,j.hasMore=0!==e.data.length,j.nextPage=e.paging?e.paging.next.substr(33):"",i(j)}else document.getElementById("mess").innerHTML+=e.error.message+"<br></br>";else document.getElementById("mess").innerHTML+="Select group where this app is installed<br></br>"},X=function(){console.log("in fetchMoreData"),o.hasMore&&window.FB.api(o.nextPage,Q)},Z=function(e){i({data:[],hasMore:!0,nextPage:"first",first:!0})},$=function(e,t){var a=new Blob([t],{type:"text/plain"}),n=document.createElement("a");n.download=e,n.href=window.URL.createObjectURL(a),n.dataset.downloadurl=["text/json",n.download,n.href].join(":");var c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n.dispatchEvent(c),n.remove()},ee=K();return Object(u.jsxs)("div",{className:ee.root,children:[Object(u.jsxs)(x.a,{className:ee.paper,children:[Object(u.jsxs)(O.a,{container:!0,wrap:"nowrap",spacing:1,children:[Object(u.jsx)(O.a,{item:!0,children:Object(u.jsx)("img",{width:"64",height:"64",alt:"pic",src:"./logo3.125.png"})}),Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsxs)(v.a,{align:"left",variant:"subtitle2",children:["Welcome ",a.Name]})}),Object(u.jsxs)(T.a,{className:ee.formControl,children:[Object(u.jsx)(E.a,{className:ee.selectEmpty,value:D,onChange:function(e){J(e.target.value),localStorage.setItem("selectedGroup",e.target.value),Z(e)},inputProps:{"aria-label":"group"},children:a.groups.map((function(e,t){return Object(u.jsx)("option",{value:e.id,children:e.name.substring(0,30)})}))}),Object(u.jsx)(F.a,{children:"Select Group"})]})]}),Object(u.jsxs)(O.a,{item:!0,container:!0,children:[Object(u.jsxs)(O.a,{item:!0,children:[Object(u.jsx)(w.a,{label:"Search group",id:"outlined-size-small",defaultValue:"Search group",variant:"outlined",size:"small",value:m,onChange:function(e){j(e.target.value)}}),Object(u.jsx)(y.a,{title:"Search",children:Object(u.jsx)(k.a,{onClick:Z,children:Object(u.jsx)(P.a,{style:{color:"CornflowerBlue"}})})})]}),Object(u.jsx)(O.a,{item:!0,xs:3}),Object(u.jsx)(O.a,{item:!0,justifyContent:"flex-end",children:Object(u.jsx)(y.a,{title:"Download",children:Object(u.jsx)(k.a,{onClick:function(){var e={data:[]};o.data.forEach((function(t){var a={fromName:t.fromName,message:t.message,updated_time:t.updated_time,comments:t.comments,reactions:t.reactions,link:t.link,cftd:t.cftd,cotm:t.cotm,feed:t.feed};e.data.push(a)}));var t=function(e,t){return null===t?" ":t},a=Object.keys(e.data[0]),n=[a.join(",")].concat(Object(f.a)(e.data.map((function(e){return a.map((function(a){return JSON.stringify(e[a],t)})).join(",")})))).join("\r\n");console.log(n),$(D+".csv",n)},children:Object(u.jsx)(W.a,{style:{color:"CornflowerBlue"}})})})})]}),Object(u.jsx)(O.a,{item:!0,children:Object(u.jsx)(C.a,{href:"./Solve_pp.pdf",target:"_blank",rel:"noopener noreferrer",children:Object(u.jsx)(v.a,{variant:"caption",display:"block",gutterBottom:!0,children:"privacy policy"})})})]}),Object(u.jsx)("div",{children:Object(u.jsx)(b.a,{dataLength:o.data.length,next:X,hasMore:o.hasMore,loader:Object(u.jsx)("h4",{children:"Loading..."}),endMessage:Object(u.jsx)("p",{style:{textAlign:"center"},children:Object(u.jsx)("b",{children:"You have reached the end"})}),children:o.data.map((function(e,t){return Object(u.jsxs)(x.a,{className:ee.paper,children:[Object(u.jsxs)(O.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(u.jsx)(O.a,{item:!0,children:Object(u.jsx)(_.a,{children:e.fromName.split(" ").map((function(e,t,a){return 0===t||t+1===a.length?e[0]:null})).join("")})}),Object(u.jsxs)(O.a,{item:!0,xs:12,children:[Object(u.jsx)(v.a,{align:"left",children:e.fromName}),Object(u.jsx)(v.a,{align:"left",children:Object(u.jsx)(C.a,{href:e.link,target:"_blank",rel:"noopener noreferrer",variant:"body2",children:e.updated_time})})]}),Object(u.jsxs)(O.a,{item:!0,container:!0,direction:"column",alignItems:"flex-end",justify:"flex-start",children:[e.cftd&&e.feed&&Object(u.jsx)(S.a,{size:"small",label:"CFTD",style:{background:"CornflowerBlue",color:"White"}}),e.cotm&&e.feed&&Object(u.jsx)(S.a,{size:"small",label:"COTM",style:{background:"CornflowerBlue",color:"White"}}),!e.feed&&Object(u.jsx)(y.a,{title:"Comment",children:Object(u.jsx)(z.a,{color:"primary"})})]})]}),Object(u.jsx)(O.a,{container:!0,wrap:"nowrap",spacing:2,children:Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsx)(v.a,{align:"left",children:e.message})})}),e.full_picture&&Object(u.jsx)("grid",{item:!0,children:Object(u.jsx)("img",{width:"400",height:"300",alt:"pic",src:e.full_picture})}),Object(u.jsxs)(O.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsxs)(v.a,{align:"left",variant:"body2",children:["likes ",e.reactions]})}),Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsxs)(v.a,{align:"right",variant:"body2",gutterBottom:"true",children:["Comments ",e.comments]})})]}),Object(u.jsxs)(O.a,{container:!0,spacing:1,style:{borderTop:"1px solid grey"},children:[Object(u.jsx)(O.a,{container:!0,direction:"column",item:!0,xs:1,children:Object(u.jsx)(O.a,{item:!0,xs:!0,style:{display:"flex",alignItems:"center"},children:Object(u.jsx)(_.a,{className:ee.img,src:a.Image})})}),Object(u.jsx)(O.a,{container:!0,direction:"column",item:!0,xs:9,alignItems:"flex-start",justifyContents:"flex-start",children:Object(u.jsx)(O.a,{item:!0,justify:"left",children:Object(u.jsx)("form",{className:ee.form,noValidate:!0,autoComplete:"off",children:Object(u.jsx)(w.a,{fullWidth:!0,style:{disableUnderline:!0,background:"linear-gradient(45deg, #eeeeee 30%, #e0e0e0 90%)",borderRadius:"30px 30px 30px 30px",padding:"0 30px"},InputProps:{disableUnderline:!0},className:ee.textField,label:"Answer",fullwidth:!0,multiline:!0,maxRows:4,value:o.data[t].solve.ans,onChange:function(e){return function(e,t,a){if(!o.data[e].solve.solved){var n=Object.assign({},o);n.data[e].solve[t]=a;var c=JSON.stringify(n.data[e].solve);localStorage.setItem(n.data[e].id,c),i(n)}}(t,"ans",e.target.value)}})})})}),Object(u.jsx)(O.a,{container:!0,direction:"column",item:!0,xs:1,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(u.jsxs)(O.a,{item:!0,children:[e.solve.solved?Object(u.jsx)(k.a,{children:Object(u.jsx)(L.a,{style:{color:"CornflowerBlue"}})}):Object(u.jsx)(k.a,{onClick:function(e){return a=t,n=e,void(o.data[a].solve.ans&&H(n.currentTarget));var a,n},children:Object(u.jsx)(B.a,{style:{color:"CornflowerBlue"}})}),Object(u.jsx)(N.a,{id:q,open:Y,anchorEl:G,onClose:V,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(u.jsxs)(v.a,{className:ee.typography,children:["Facebook API doesn't allow posting comments.",Object(u.jsx)("br",{}),"The comment is saved in browser's local storage for reference"]})})]})})]})]})}))})}),Object(u.jsx)("div",{id:"mess"}),o.hasMore&&Object(u.jsx)("div",{children:Object(u.jsx)(I.a,{variant:"outlined",size:"medium",color:"primary",onClick:X,children:"More"})})]})},G=a(82),H=a(12);var V=function(){return Object(u.jsx)(c.a.Fragment,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(G.a,{basename:"/solve",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)(H.c,{children:[Object(u.jsx)(H.a,{exact:!0,path:"/",component:g}),Object(u.jsx)(H.a,{path:"/Dashboard",component:A})]})})})})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(V,{})}),document.getElementById("root")),Y()}},[[111,1,2]]]);
//# sourceMappingURL=main.e872956f.chunk.js.map