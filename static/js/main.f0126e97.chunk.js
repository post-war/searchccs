(this.webpackJsonpsearchccs=this.webpackJsonpsearchccs||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);a(97);var n=a(0),s=a.n(n),c=a(11),o=a.n(c),r=(a(102),a(103),a(67)),i=a(68),l=a(85),d=a(83),m=a(69),j=a.n(m),u=a(2),g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={},n}return Object(i.a)(a,[{key:"signup",value:function(e){var t={token:e.accessToken,Name:e.name,Image:e.picture.data.url,groups:e.groups.data,ProviderId:"Facebook"};localStorage.setItem("userData",JSON.stringify(t)),this.props.history.push("/Dashboard")}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{style:{paddingTop:"20px"},className:"col-sm-12",children:[Object(u.jsx)("div",{className:"col-sm-4"}),Object(u.jsx)("div",{className:"col-sm-4",children:Object(u.jsx)(j.a,{buttonStyle:{padding:"6px"},appId:"194888908816770",autoLoad:!0,version:"10.0",fields:"name,picture,groups",callback:function(t){console.log(t),e.signup(t)}})}),Object(u.jsx)("div",{className:"col-sm-4"})]})})})}}]),a}(n.Component),f=a(84),p=a(41),b=a(70),h=a(141),x=a(144),O=a(146),v=a(156),w=a(112),y=a(153),k=a(157),S=a(150),C=a(151),N=a(158),I=a(154),_=a(152),F=a(148),E=a(147),M=a(75),B=a(81),T=a.n(B),L=a(80),J=a.n(L),P=a(77),R=a.n(P),D=a(79),z=a.n(D),U=a(78),W=a.n(U);var A=function(){var e=Object(n.useState)((function(){return JSON.parse(localStorage.getItem("userData"))})),t=Object(p.a)(e,2),a=t[0],c=(t[1],s.a.useState({data:[],hasMore:!0,nextPage:"first",first:!0})),o=Object(p.a)(c,2),r=o[0],i=o[1],l=s.a.useState(""),d=Object(p.a)(l,2),m=d[0],j=d[1],g=s.a.useState((function(){return JSON.parse(localStorage.getItem("selectedGroup"))})),B=Object(p.a)(g,2),L=B[0],P=B[1],D=Object(n.useRef)(0),U=s.a.useState(null),A=Object(p.a)(U,2),G=A[0],H=A[1],V=function(){H(null)},Y=Boolean(G),q=Y?"simple-popover":void 0;Object(n.useEffect)((function(){D.current++,console.log("in useEffect ".concat(D.current)),r.first&&window.FB.api("/"+L,"GET",{fields:"feed.limit(30){from,id,message,updated_time,permalink_url,comments.limit(10).filter(stream){created_time,from,message,id,like_count,comment_count,permalink_url},reactions,full_picture}"},(function(e){Q(e.feed)}))}));var K=Object(h.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",background:"linear-gradient(45deg, #fafafa 30%, #e3f2fd 90%)"},paper:{maxWidth:500,margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(1)},textField:{marginLeft:e.spacing(1)},typography:{padding:e.spacing(2)},form:{padding:e.spacing(0,3)},cftd:{backgroundColor:"#FF4500",height:"20px",width:"35px",color:"#FFFFFF"},iconButton:{padding:10},outerColumn:{borderRight:"1px solid grey",borderBottom:"1px solid grey",borderLeft:"1px solid grey"},centerColumn:{marginLeft:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:200},selectEmpty:{marginTop:e.spacing(2)}}})),Q=function(e){if(console.log(e),e)if(e.data){if(0===e.data.length){var t=Object.assign({},r);return t.hasMore=!1,void i(t)}var a=new RegExp(/#CFTD/i),n=new RegExp(/#COTM/i),s=new RegExp(/#SOTM/i),c=new RegExp(m,"i"),o=0,l=Object.assign({},r);e.data.forEach((function(e,t,r){var i=a.test(e.message),d={fromName:e.from?e.from.name:"Unknown",fromId:e.from?e.from.id:"9999999999999999",id:e.id,message:e.message,updated_time:e.updated_time,comments:e.comments?e.comments.data.length:0,reactions:e.reactions?e.reactions.data.length:0,link:e.permalink_url,full_picture:e.full_picture?e.full_picture:"",cftd:i,cotm:n.test(e.message)||!!e.comments&&e.comments.data.some((function(e){return n.test(e.message)})),sotm:s.test(e.message)||!!e.comments&&e.comments.data.some((function(e){return s.test(e.message)})),feed:!0,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};if(""===m)console.log("Selected ".concat(o++)),l.data.push(d),i&&d.comments>0&&e.comments.data.forEach((function(e,t,a){var c={fromName:e.from?e.from.name:"Unknown",fromId:e.from?e.from.id:"9999999999999999",id:e.id,message:e.message,updated_time:e.created_time,comments:e.comment_count,reactions:e.like_count,link:e.permalink_url,cftd:!0,cotm:n.test(e.message),sotm:s.test(e.message),feed:!1,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};console.log("Selected ".concat(o++)),l.data.push(c)}));else{var j=c.test(d.message),u=a.test(e.message);j?(console.log("Selected ".concat(o++)),l.data.push(d)):d.comments>0&&e.comments.data.forEach((function(e,t,a){var r=c.test(e.message);if(console.log("dtc.mess "+e.message),r){var i={fromName:e.from?e.from.name:"Unknown",fromId:e.from?e.from.id:"9999999999999999",id:e.id,message:e.message,updated_time:e.created_time,comments:e.comment_count,reactions:e.like_count,link:e.permalink_url,cftd:u,cotm:n.test(e.message),sotm:s.test(e.message),feed:!1,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};console.log("Selected ".concat(o++)),l.data.push(d),l.data.push(i)}}))}})),l.first=!1,l.hasMore=0!==e.data.length,l.nextPage=e.paging?e.paging.next.substr(33):"",i(l)}else document.getElementById("mess").innerHTML+=e.error.message+"<br></br>";else document.getElementById("mess").innerHTML+="Select group where this app is installed<br></br>"},X=function(){console.log("in fetchMoreData"),r.hasMore&&window.FB.api(r.nextPage,Q)},Z=function(e){i({data:[],hasMore:!0,nextPage:"first",first:!0})},$=function(e,t){var a=new Blob([t],{type:"text/plain"}),n=document.createElement("a");n.download=e,n.href=window.URL.createObjectURL(a),n.dataset.downloadurl=["text/json",n.download,n.href].join(":");var s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});n.dispatchEvent(s),n.remove()},ee=K();return Object(u.jsxs)("div",{className:ee.root,children:[Object(u.jsxs)(x.a,{className:ee.paper,children:[Object(u.jsxs)(O.a,{container:!0,wrap:"nowrap",spacing:1,children:[Object(u.jsx)(O.a,{item:!0,children:Object(u.jsx)(v.a,{src:a.Image})}),Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsxs)(w.a,{align:"left",variant:"subtitle2",children:["Welcome ",a.Name]})}),Object(u.jsxs)(E.a,{className:ee.formControl,children:[Object(u.jsx)(M.a,{className:ee.selectEmpty,value:L,onChange:function(e){P(e.target.value),localStorage.setItem("selectedGroup",e.target.value),Z(e)},inputProps:{"aria-label":"group"},children:a.groups.map((function(e,t){return Object(u.jsx)("option",{value:e.id,children:e.name})}))}),Object(u.jsx)(F.a,{children:"Select Group"})]})]}),Object(u.jsxs)(O.a,{item:!0,container:!0,children:[Object(u.jsxs)(O.a,{item:!0,children:[Object(u.jsx)(y.a,{label:"Search group",id:"outlined-size-small",defaultValue:"Search group",variant:"outlined",size:"small",value:m,onChange:function(e){j(e.target.value)}}),Object(u.jsx)(k.a,{title:"Search",children:Object(u.jsx)(S.a,{onClick:Z,children:Object(u.jsx)(R.a,{style:{color:"CornflowerBlue"}})})})]}),Object(u.jsx)(O.a,{item:!0,xs:4}),Object(u.jsx)(O.a,{item:!0,justifyContent:"flex-end",children:Object(u.jsx)(k.a,{title:"Download",children:Object(u.jsx)(S.a,{onClick:function(){var e={data:[]};r.data.forEach((function(t){var a={fromName:t.fromName,message:t.message,updated_time:t.updated_time,comments:t.comments,reactions:t.reactions,link:t.link,cftd:t.cftd,cotm:t.cotm,sotm:t.sotm,feed:t.feed};e.data.push(a)}));var t=function(e,t){return null===t?" ":t},a=Object.keys(e.data[0]),n=[a.join(",")].concat(Object(f.a)(e.data.map((function(e){return a.map((function(a){return JSON.stringify(e[a],t)})).join(",")})))).join("\r\n");console.log(n),$(L+".csv",n)},children:Object(u.jsx)(W.a,{style:{color:"CornflowerBlue"}})})})})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)(b.a,{dataLength:r.data.length,next:X,hasMore:r.hasMore,loader:Object(u.jsx)("h4",{children:"Loading..."}),endMessage:Object(u.jsx)("p",{style:{textAlign:"center"},children:Object(u.jsx)("b",{children:"You have reached the end"})}),children:r.data.map((function(e,t){return Object(u.jsxs)(x.a,{className:ee.paper,children:[Object(u.jsxs)(O.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(u.jsx)(O.a,{item:!0,children:Object(u.jsx)(v.a,{children:e.fromName.split(" ").map((function(e,t,a){return 0===t||t+1===a.length?e[0]:null})).join("")})}),Object(u.jsxs)(O.a,{item:!0,xs:12,children:[Object(u.jsx)(w.a,{align:"left",children:e.fromName}),Object(u.jsx)(w.a,{align:"left",children:Object(u.jsx)(C.a,{href:e.link,target:"_blank",rel:"noopener noreferrer",variant:"body2",children:e.updated_time})})]}),Object(u.jsxs)(O.a,{item:!0,container:!0,direction:"column",alignItems:"flex-end",justify:"flex-start",children:[e.cftd&&e.feed&&Object(u.jsx)(N.a,{size:"small",label:"CFTD",style:{background:"CornflowerBlue",color:"White"}}),e.cotm&&e.feed&&Object(u.jsx)(N.a,{size:"small",label:"COTM",style:{background:"CornflowerBlue",color:"White"}}),e.sotm&&e.feed&&Object(u.jsx)(N.a,{size:"small",label:"SOTM",style:{background:"CornflowerBlue",color:"White"}}),!e.feed&&Object(u.jsx)(k.a,{title:"Comment",children:Object(u.jsx)(z.a,{color:"primary"})})]})]}),Object(u.jsx)(O.a,{container:!0,wrap:"nowrap",spacing:2,children:Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsx)(w.a,{align:"left",children:e.message})})}),e.full_picture&&Object(u.jsx)("grid",{item:!0,children:Object(u.jsx)("img",{width:"400",height:"300",alt:"pic",src:e.full_picture})}),Object(u.jsxs)(O.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsxs)(w.a,{align:"left",variant:"body2",children:["likes ",e.reactions]})}),Object(u.jsx)(O.a,{item:!0,xs:!0,children:Object(u.jsxs)(w.a,{align:"right",variant:"body2",gutterBottom:"true",children:["Comments ",e.comments]})})]}),Object(u.jsxs)(O.a,{container:!0,spacing:1,style:{borderTop:"1px solid grey"},children:[Object(u.jsx)(O.a,{container:!0,direction:"column",item:!0,xs:1,children:Object(u.jsx)(O.a,{item:!0,xs:!0,style:{display:"flex",alignItems:"center"},children:Object(u.jsx)(v.a,{className:ee.img,src:a.Image})})}),Object(u.jsx)(O.a,{container:!0,direction:"column",item:!0,xs:9,alignItems:"flex-start",justifyContents:"flex-start",children:Object(u.jsx)(O.a,{item:!0,justify:"left",children:Object(u.jsx)("form",{className:ee.form,noValidate:!0,autoComplete:"off",children:Object(u.jsx)(y.a,{fullWidth:!0,style:{disableUnderline:!0,background:"linear-gradient(45deg, #eeeeee 30%, #e0e0e0 90%)",borderRadius:"30px 30px 30px 30px",padding:"0 30px"},InputProps:{disableUnderline:!0},className:ee.textField,label:"Answer",fullwidth:!0,multiline:!0,maxRows:4,value:r.data[t].solve.ans,onChange:function(e){return function(e,t,a){if(!r.data[e].solve.solved){var n=Object.assign({},r);n.data[e].solve[t]=a;var s=JSON.stringify(n.data[e].solve);localStorage.setItem(n.data[e].id,s),i(n)}}(t,"ans",e.target.value)}})})})}),Object(u.jsx)(O.a,{container:!0,direction:"column",item:!0,xs:1,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(u.jsxs)(O.a,{item:!0,children:[e.solve.solved?Object(u.jsx)(S.a,{children:Object(u.jsx)(J.a,{style:{color:"CornflowerBlue"}})}):Object(u.jsx)(S.a,{onClick:function(e){return a=t,n=e,void(r.data[a].solve.ans&&H(n.currentTarget));var a,n},children:Object(u.jsx)(T.a,{style:{color:"CornflowerBlue"}})}),Object(u.jsx)(I.a,{id:q,open:Y,anchorEl:G,onClose:V,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(u.jsxs)(w.a,{className:ee.typography,children:["Facebook API doesn't allow posting comments.",Object(u.jsx)("br",{}),"The comment is saved in browser's local storage for reference"]})})]})})]})]})}))})}),Object(u.jsx)("div",{id:"mess"}),r.hasMore&&Object(u.jsx)("div",{children:Object(u.jsx)(_.a,{variant:"outlined",size:"medium",color:"primary",onClick:X,children:"More"})})]})},G=a(82),H=a(12);var V=function(){return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(G.a,{basename:"/searchccs",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)(H.c,{children:[Object(u.jsx)(H.a,{exact:!0,path:"/",component:g}),Object(u.jsx)(H.a,{path:"/Dashboard",component:A})]})})})})})},Y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),c(e),o(e)}))};o.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(V,{})}),document.getElementById("root")),Y()}},[[111,1,2]]]);
//# sourceMappingURL=main.f0126e97.chunk.js.map