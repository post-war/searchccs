{"version":3,"sources":["Loginbyfacebook.js","Dashboard.js","App.js","reportWebVitals.js","index.js"],"names":["Logintbyfacebook","props","state","res","responseFacebook","Name","name","email","token","accessToken","Image","picture","data","url","ProviderId","sessionStorage","setItem","JSON","stringify","this","history","push","className","style","buttonStyle","padding","appId","process","autoLoad","version","fields","callback","response","console","log","signup","Component","Dashboard","useState","parse","getItem","React","hasMore","nextPage","first","posts","setPosts","searchTopic","setSearchTopic","countRef","useRef","anchorEl","setAnchorEl","handlePopClose","open","Boolean","id","undefined","useEffect","current","window","FB","api","addPosts","feed","useStyles","makeStyles","theme","root","flexGrow","overflow","background","paper","maxWidth","margin","spacing","textField","marginLeft","typography","form","cftd","backgroundColor","height","width","color","iconButton","outerColumn","borderRight","borderBottom","borderLeft","centerColumn","length","postsCopy","Object","assign","regexCftd","RegExp","regexTopic","selectCount","forEach","dta","index","array","cftdPost","test","message","aPost","from","updated_time","comments","reactions","link","substr","full_picture","solve","localStorage","ans","anno","solved","dtc","cPost","created_time","comment_count","like_count","selectPost","every","paging","next","document","getElementById","innerHTML","error","fetchMoreData","classes","Paper","Grid","container","wrap","item","Avatar","src","xs","Typography","align","variant","TextField","label","defaultValue","size","value","onChange","e","target","IconButton","onClick","dataLength","loader","endMessage","textAlign","map","split","n","i","a","join","Link","href","rel","direction","alignItems","justify","Chip","Tooltip","title","alt","gutterBottom","borderTop","display","img","justifyContents","noValidate","autoComplete","fullWidth","disableUnderline","borderRadius","InputProps","fullwidth","multiline","maxRows","idx","key","val","jsonObj","handleAnsChange","justifyContent","event","currentTarget","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","Button","App","Fragment","basename","exact","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"yQA2DeA,EAzDf,kDACQ,WAAYC,GAAQ,IAAD,8BACX,cAAMA,IACDC,MAAQ,GAFF,EAD3B,0CAQQ,SAAOC,GACL,IAAMC,EAAmB,CACvBC,KAAMF,EAAIG,KACVC,MAAOJ,EAAII,MACXC,MAAOL,EAAIM,YACXC,MAAOP,EAAIQ,QAAQC,KAAKC,IACxBC,WAAY,YAIdC,eAAeC,QAAQ,WAAYC,KAAKC,UAAUd,IAClDe,KAAKlB,MAAMmB,QAAQC,KAAK,gBAnBlC,oBAsBQ,WAAU,IAAD,OASL,OACQ,qBAAKC,UAAU,MAAf,SAMA,qBAAKA,UAAU,MAAf,SACE,sBAAKC,MAAO,CAAE,WAAc,QAAUD,UAAU,YAAhD,UACE,qBAAKA,UAAU,aACf,qBAAKA,UAAU,WAAf,SACA,cAAC,IAAD,CAAeE,YAAa,CAACC,QAAQ,OACnCC,MApBQC,kBAqBRC,UAAU,EACVC,QAAQ,OACRC,OAAO,eACPC,SAvBW,SAACC,GAClBC,QAAQC,IAAIF,GAIZ,EAAKG,OAAOH,QAoBR,qBAAKV,UAAU,wBAjDvC,GAAsCc,a,+LCyfvBC,MAref,WACE,MAAwBC,oBAAS,WAC/B,OAAOrB,KAAKsB,MAAMxB,eAAeyB,QAAQ,gBAD3C,mBAAOlC,EAAP,KAIA,GAJA,KAI0BmC,IAAMH,SAAS,CACjB1B,KAAM,GACN8B,SAAS,EACTC,SAAU,QACVC,OAAO,KAJ/B,mBAAOC,EAAP,KAAcC,EAAd,KAMA,EAAsCL,IAAMH,SAAS,IAArD,mBAAOS,EAAP,KAAoBC,EAApB,KAEMC,EAAWC,iBAAO,GAGxB,EAAgCT,IAAMH,SAAS,MAA/C,mBAAOa,EAAP,KAAiBC,EAAjB,KAIMC,EAAiB,WACrBD,EAAY,OAERE,EAAOC,QAAQJ,GACfK,EAAKF,EAAO,sBAAmBG,EAGrCC,qBAAU,WAGR,GAFAT,EAASU,UACT1B,QAAQC,IAAR,uBAA4Be,EAASU,UACjCd,EAAMD,MAAO,CAEfgB,OAAOC,GAAGC,IAAI,mBACZ,MACA,CAAC,OAAS,iKACR,SAAC9B,GAAc+B,EAAS/B,EAASgC,aAKzC,IAAMC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,KAAM,CACJC,SAAU,EACVC,SAAU,SACVC,WAAY,oDAEdC,MAAO,CACLC,SAAU,IACVC,OAAO,GAAD,OAAKP,EAAMQ,QAAQ,GAAnB,WACNlD,QAAS0C,EAAMQ,QAAQ,IAEzBC,UAAW,CACTC,WAAYV,EAAMQ,QAAQ,IAE5BG,WAAY,CACVrD,QAAS0C,EAAMQ,QAAQ,IAEzBI,KAAM,CACJtD,QAAS0C,EAAMQ,QAAQ,EAAG,IAE5BK,KAAM,CACJC,gBAAiB,UACjBC,OAAQ,OACRC,MAAO,OACPC,MAAO,WAETC,WAAY,CACV5D,QAAS,IAEX6D,YAAa,CACXC,YAAa,iBACbC,aAAc,iBACdC,WAAY,kBAEdC,aAAc,CACZb,WAAYV,EAAMQ,QAAQ,QAKxBZ,EAAW,SAAC/B,GAEhB,GADAC,QAAQC,IAAIF,GACPA,EAASpB,KAAd,CAMA,GAA6B,IAAzBoB,EAASpB,KAAK+E,OAAc,CAC9B,IAAIC,EAAYC,OAAOC,OAAO,GAAIjD,GAGlC,OAFA+C,EAAUlD,SAAU,OACpBI,EAAS8C,GAGX,IAAMG,EAAY,IAAIC,OAAO,UACvBC,EAAa,IAAID,OAAOjD,EAAa,KACvCmD,EAAc,EACdN,EAAYC,OAAOC,OAAO,GAAIjD,GAElCb,EAASpB,KAAKuF,SAAQ,SAACC,EAAKC,EAAOC,GAEjC,IAAIC,EAAWR,EAAUS,KAAKJ,EAAIK,SAC9BC,EAAQ,CACVC,KAAMP,EAAIO,KAAOP,EAAIO,KAAO,CAAErG,KAAM,UAAWkD,GAAI,oBACnDA,GAAI4C,EAAI5C,GACRiD,QAASL,EAAIK,QACbG,aAAcR,EAAIQ,aAClBC,SAAUT,EAAIS,SAAWT,EAAIS,SAASjG,KAAK+E,OAAS,EACpDmB,UAAWV,EAAIU,UAAYV,EAAIU,UAAUlG,KAAK+E,OAAS,EACvDoB,KAAM,kDAAoDX,EAAI5C,GAAGwD,OAAO,IAAM,IAC9EC,aAAcb,EAAIa,aAAeb,EAAIa,aAAe,GACpDjC,KAAMuB,EACNvC,MAAM,EAENkD,MAAOC,aAAa3E,QAAQ4D,EAAI5C,IAAMvC,KAAKsB,MAAM4E,aAAa3E,QAAQ4D,EAAI5C,KACtE,CAAE4D,IAAK,GAAIC,KAAM,GAAIC,QAAQ,IAOnC,GAAoB,KAAhBvE,EACFd,QAAQC,IAAR,mBAAwBgE,MACxBN,EAAUhF,KAAKS,KAAKqF,GAEhBH,GAAaG,EAAMG,SAAW,GAChCT,EAAIS,SAASjG,KAAKuF,SAAQ,SAAUoB,EAAKlB,EAAOC,GAC9C,IAAIkB,EAAQ,CACVb,KAAMY,EAAIZ,KAAOY,EAAIZ,KAAO,CAAErG,KAAM,UAAWkD,GAAI,oBACnDA,GAAI+D,EAAI/D,GACRiD,QAASc,EAAId,QACbG,aAAcW,EAAIE,aAClBZ,SAAUU,EAAIG,cACZZ,UAAWS,EAAII,WACjBZ,KAAM,kDAAoDX,EAAI5C,GAAGwD,OAAO,IAAM,IAC9EhC,MAAM,EACNhB,MAAM,EACNkD,MAAOC,aAAa3E,QAAQ+E,EAAI/D,IAAMvC,KAAKsB,MAAM4E,aAAa3E,QAAQ+E,EAAI/D,KACtE,CAAE4D,IAAK,GAAIC,KAAM,GAAIC,QAAQ,IAEnCrF,QAAQC,IAAR,mBAAwBgE,MACxBN,EAAUhF,KAAKS,KAAKmG,UAGnB,CACL,IAAII,EAAa3B,EAAWO,KAAKE,EAAMD,UAAYR,EAAWO,KAAKE,EAAMC,KAAKrG,MAC1EiG,EAAWR,EAAUS,KAAKJ,EAAIK,SAC9BmB,GACF3F,QAAQC,IAAR,mBAAwBgE,MACxBN,EAAUhF,KAAKS,KAAKqF,IAEhBA,EAAMG,SAAW,GACnBT,EAAIS,SAASjG,KAAKiH,OAAM,SAAUN,EAAKlB,EAAOC,GAE5C,GADoBL,EAAWO,KAAKe,EAAId,UAAYR,EAAWO,KAAKe,EAAIZ,KAAKrG,MAC1D,CACjB,IAAIkH,EAAQ,CACVb,KAAMY,EAAIZ,KAAOY,EAAIZ,KAAO,CAAErG,KAAM,UAAWkD,GAAI,oBACnDA,GAAI+D,EAAI/D,GACRiD,QAASc,EAAId,QACbG,aAAcW,EAAIE,aAClBZ,SAAUU,EAAIG,cACdZ,UAAWS,EAAII,WACfZ,KAAM,kDAAoDX,EAAI5C,GAAGwD,OAAO,IAAM,IAC9EhC,KAAMuB,EACNvC,MAAM,EACNkD,MAAOC,aAAa3E,QAAQ+E,EAAI/D,IAAMvC,KAAKsB,MAAM4E,aAAa3E,QAAQ+E,EAAI/D,KACtE,CAAE4D,IAAK,GAAIC,KAAM,GAAIC,QAAQ,IAKnC,OAHArF,QAAQC,IAAR,mBAAwBgE,MACxBN,EAAUhF,KAAKS,KAAKqF,GACpBd,EAAUhF,KAAKS,KAAKmG,IACb,UAYnB5B,EAAUhD,OAAQ,EAClBgD,EAAUlD,QAAoC,IAAzBV,EAASpB,KAAK+E,OACnCC,EAAUjD,SAAWX,EAAS8F,OAAS9F,EAAS8F,OAAOC,KAAKf,OAAO,IAAM,GACzElE,EAAS8C,QAxGPoC,SAASC,eAAe,QAAQC,WAAalG,EAASmG,MAAM1B,QAAU,aA6GpE2B,EAAgB,WACpBnG,QAAQC,IAAI,oBACRW,EAAMH,SACRkB,OAAOC,GAAGC,IAAIjB,EAAMF,SAAUoB,IAoE5BsE,EAAUpE,IAEhB,OAEE,sBAAK3C,UAAW+G,EAAQjE,KAAxB,UACE,cAACkE,EAAA,EAAD,CAAOhH,UAAW+G,EAAQ7D,MAA1B,SACE,eAAC+D,EAAA,EAAD,CAAMC,WAAS,EAACC,KAAK,SAAS9D,QAAS,EAAvC,UACE,cAAC4D,EAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAACC,EAAA,EAAD,CAAQC,IAAKtI,EAAKI,UAEpB,cAAC6H,EAAA,EAAD,CAAMG,MAAI,EAACG,IAAE,EAAb,SACE,eAACC,EAAA,EAAD,CAAYC,MAAM,OAAOC,QAAQ,YAAjC,qBAAsD1I,EAAKD,UAE7D,eAACkI,EAAA,EAAD,CAAMG,MAAI,EAAV,UACA,cAACO,EAAA,EAAD,CAAWC,MAAM,eACjB1F,GAAG,sBACH2F,aAAa,eACbH,QAAQ,WACRI,KAAK,QACHC,MAAOtG,EAAauG,SArEJ,SAACC,GACzBvG,EAAeuG,EAAEC,OAAOH,OACxBpH,QAAQC,IAAIa,MAoEL,cAAC0G,EAAA,EAAD,CAAaC,QAjEM,SAACH,GAC3BzG,EAAS,CACPlC,KAAM,GACN8B,SAAS,EACTC,SAAU,QACVC,OAAO,KA4DF,SACI,cAAC,IAAD,CAAYrB,MAAO,CAAC6D,MAAO,8BAMpC,8BACE,cAAC,IAAD,CACEuE,WAAY9G,EAAMjC,KAAK+E,OACvBoC,KAAMK,EACN1F,QAASG,EAAMH,QACfkH,OAAQ,4CACRC,WACE,mBAAGtI,MAAO,CAAEuI,UAAW,UAAvB,SACE,2DAPN,SAWGjH,EAAMjC,KAAKmJ,KAAI,SAAC3D,EAAKC,GAAN,OACd,eAACiC,EAAA,EAAD,CAAOhH,UAAW+G,EAAQ7D,MAA1B,UACA,eAAC+D,EAAA,EAAD,CAAMC,WAAS,EAACC,KAAK,SAAS9D,QAAS,EAAvC,UACE,cAAC4D,EAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAACC,EAAA,EAAD,UAASvC,EAAIO,KAAKrG,KAAK0J,MAAM,KAAKD,KAAI,SAACE,EAAEC,EAAEC,GAAL,OAAiB,IAAND,GAAWA,EAAE,IAAMC,EAAExE,OAASsE,EAAE,GAAK,QAAMG,KAAK,QAInG,eAAC7B,EAAA,EAAD,CAAMG,MAAI,EAACG,GAAI,GAAf,UACE,cAACC,EAAA,EAAD,CAAYC,MAAM,OAAlB,SAA0B3C,EAAIO,KAAKrG,OACnC,cAACwI,EAAA,EAAD,CAAYC,MAAM,OAAlB,SAEE,cAACsB,EAAA,EAAD,CAAMC,KAAMlE,EAAIW,KAAMyC,OAAO,SAASe,IAAI,sBAAsBvB,QAAQ,QAAxE,SACG5C,EAAIQ,oBAKX,eAAC2B,EAAA,EAAD,CACEG,MAAI,EACJF,WAAS,EACTgC,UAAU,SACVC,WAAW,WACXC,QAAQ,aALV,UAOItE,EAAIpB,MAAQoB,EAAIpC,MAClB,cAAC2G,EAAA,EAAD,CAAMvB,KAAK,QAAQF,MAAM,OAAO3H,MAAO,CAACgD,WAAY,iBAAkBa,MAAM,YAEzEgB,EAAIpC,MACP,cAAC4G,EAAA,EAAD,CAASC,MAAM,UAAf,SACG,cAAC,IAAD,CAAezF,MAAM,oBAM5B,cAACmD,EAAA,EAAD,CAAMC,WAAS,EAACC,KAAK,SAAS9D,QAAS,EAAvC,SACE,cAAC4D,EAAA,EAAD,CAAMG,MAAI,EAACG,IAAE,EAAb,SACE,cAACC,EAAA,EAAD,CAAYC,MAAM,OAAlB,SAA0B3C,EAAIK,cAIjCL,EAAIa,cACL,sBAAMyB,MAAI,EAAV,SACE,qBAAKvD,MAAM,MAAMD,OAAO,MAAM4F,IAAI,MAAMlC,IAAKxC,EAAIa,iBAKnD,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAACC,KAAK,SAAS9D,QAAS,EAAvC,UACE,cAAC4D,EAAA,EAAD,CAAMG,MAAI,EAACG,IAAE,EAAb,SACE,eAACC,EAAA,EAAD,CAAYC,MAAM,OAAOC,QAAQ,QAAjC,mBAAgD5C,EAAIU,eAGtD,cAACyB,EAAA,EAAD,CAAMG,MAAI,EAACG,IAAE,EAAb,SACE,eAACC,EAAA,EAAD,CAAYC,MAAM,QAAQC,QAAQ,QAAQ+B,aAAa,OAAvD,sBACY3E,EAAIS,iBAKpB,eAAC0B,EAAA,EAAD,CAAMC,WAAS,EAAC7D,QAAS,EAAGpD,MAAO,CAAEyJ,UAAW,kBAAhD,UACE,cAACzC,EAAA,EAAD,CAAMC,WAAS,EAACgC,UAAU,SAAS9B,MAAI,EAACG,GAAI,EAA5C,SACE,cAACN,EAAA,EAAD,CACEG,MAAI,EACJG,IAAE,EAEFtH,MAAO,CAAE0J,QAAS,OAAQR,WAAY,UAJxC,SAME,cAAC9B,EAAA,EAAD,CAAQrH,UAAW+G,EAAQ6C,IAAKtC,IAAKtI,EAAKI,YAI9C,cAAC6H,EAAA,EAAD,CACEC,WAAS,EACTgC,UAAU,SACV9B,MAAI,EACJG,GAAI,EAEJ4B,WAAW,aACXU,gBAAgB,aAPlB,SASG,cAAC5C,EAAA,EAAD,CAAMG,MAAI,EAACgC,QAAQ,OAAnB,SAED,sBAAMpJ,UAAW+G,EAAQtD,KAAMqG,YAAU,EAACC,aAAa,MAAvD,SACD,cAACpC,EAAA,EAAD,CAAWqC,WAAS,EACpB/J,MAAO,CACNgK,kBAAkB,EAClBhH,WAAY,mDACZiH,aAAc,sBACd/J,QAAS,UAIVgK,WAAY,CACXF,kBAAkB,GAElBjK,UAAW+G,EAAQzD,UAClBsE,MAAM,SACNwC,WAAS,EACTC,WAAS,EACTC,QAAS,EACTvC,MAAOxG,EAAMjC,KAAKyF,GAAOa,MAAME,IAC/BkC,SAAU,SAACC,GAAD,OA7MD,SAACsC,EAAKC,EAAKC,GAEjC,IAAKlJ,EAAMjC,KAAKiL,GAAK3E,MAAMI,OAAO,CAChC,IAAI1B,EAAYC,OAAOC,OAAO,GAAIjD,GAClC+C,EAAUhF,KAAKiL,GAAK3E,MAAM4E,GAAOC,EAEjC,IAAMC,EAAU/K,KAAKC,UAAU0E,EAAUhF,KAAKiL,GAAK3E,OACnDC,aAAanG,QAAQ4E,EAAUhF,KAAKiL,GAAKrI,GAAIwI,GAE7ClJ,EAAS8C,IAoMmBqG,CAAgB5F,EAAO,MAAQkD,EAAEC,OAAOH,gBAkB5D,cAACd,EAAA,EAAD,CACEC,WAAS,EACTgC,UAAU,SACV9B,MAAI,EACJG,GAAI,EACJtH,MAAO,CACL0J,QAAS,OACTR,WAAY,SACZyB,eAAgB,UARpB,SAWE,eAAC3D,EAAA,EAAD,CAAMG,MAAI,EAAV,UACGtC,EAAIc,MAAMI,OACT,cAACmC,EAAA,EAAD,UACA,cAAC,IAAD,CAAUlI,MAAO,CAAC6D,MAAO,sBAG3B,cAACqE,EAAA,EAAD,CAAaC,QAAS,SAACH,GAAD,OArNlBsC,EAqNoCxF,EArN/B8F,EAqNsC5C,OApNzD1G,EAAMjC,KAAKiL,GAAK3E,MAAME,KACxBhE,EAAY+I,EAAMC,gBAFH,IAACP,EAAKM,GAqNT,SACE,cAAC,IAAD,CAAU5K,MAAO,CAAC6D,MAAO,sBAG3B,cAACiH,EAAA,EAAD,CACA7I,GAAIA,EACJF,KAAMA,EACNH,SAAUA,EACVmJ,QAASjJ,EACTkJ,aAAc,CACZC,SAAU,MACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,UAXd,SAcA,eAAC3D,EAAA,EAAD,CAAYxH,UAAW+G,EAAQvD,WAA/B,yDAC8C,uBAD9C,uFAcZ,qBAAKtB,GAAG,SACLX,EAAMH,SACH,8BACE,cAACiK,EAAA,EAAD,CAAQ3D,QAAQ,WAAWI,KAAK,SAAShE,MAAM,UAAUsE,QAAStB,EAAlE,wB,gBC1dCwE,MAlBf,WACE,OACE,cAAC,IAAMC,SAAP,UACD,qBAAKvL,UAAU,MAAf,SAEE,cAAC,IAAD,CAAQwL,SAAS,aAAjB,SACC,qBAAKxL,UAAU,YAAf,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyL,OAAK,EAACC,KAAK,IAAIC,UAAWjN,IACjC,cAAC,IAAD,CAAOgN,KAAK,aAAaC,UAAW5K,gBCF/B6K,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF7F,SAASC,eAAe,SAM1BiF,M","file":"static/js/main.01e38101.chunk.js","sourcesContent":["import React, { Component } from 'react'  \r\nimport FacebookLogin from 'react-facebook-login';  \r\nexport class Logintbyfacebook extends Component {  \r\n        constructor(props) {  \r\n                super(props);  \r\n                this.state = {  \r\n              \r\n                };  \r\n        }  \r\n        \r\n        signup(res) {  \r\n          const responseFacebook = {  \r\n            Name: res.name,  \r\n            email: res.email,  \r\n            token: res.accessToken,  \r\n            Image: res.picture.data.url,  \r\n            ProviderId: 'Facebook'  \r\n        \r\n          }  \r\n          \r\n          sessionStorage.setItem(\"userData\", JSON.stringify(responseFacebook));  \r\n          this.props.history.push('/Dashboard')\r\n\r\n        };  \r\n        render() {  \r\n            const facebookAppId = process.env.REACT_APP_FACEBOOK_APP_ID;\r\n            const responseFacebook = (response) => {  \r\n                    console.log(response);  \r\n                 /*    var res = response.profileObj;  \r\n                    console.log(res);  */ \r\n                    debugger;  \r\n                    this.signup(response);  \r\n                  }  \r\n            return (  \r\n                    <div className=\"App\">  \r\n                    {/* <div className=\"row\">  \r\n                      <div className=\"col-sm-12 btn btn-info\">  \r\n                        Login With Facebook Using ReactJS  \r\n                        </div>  \r\n                    </div>   */}\r\n                    <div className=\"row\">  \r\n                      <div style={{ 'paddingTop': \"20px\" }} className=\"col-sm-12\">  \r\n                        <div className=\"col-sm-4\"></div>  \r\n                        <div className=\"col-sm-4\">  \r\n                        <FacebookLogin buttonStyle={{padding:\"6px\"}}  \r\n                          appId={facebookAppId}  \r\n                          autoLoad={true}\r\n                          version=\"10.0\" \r\n                          fields=\"name,picture\"  \r\n                          callback={responseFacebook}/>  \r\n                        </div>  \r\n                        <div className=\"col-sm-4\"></div>  \r\n                      </div>  \r\n                    </div>  \r\n                  </div>  \r\n            )  \r\n        }  \r\n}  \r\n  \r\nexport default Logintbyfacebook","import React, { useEffect, useState, useRef } from 'react'\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Grid,\r\n  Avatar,\r\n  Typography,\r\n  TextField,\r\n  Link,\r\n  Chip,\r\n  IconButton,\r\n  Button,\r\n  Popover,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport CopyrightIcon from '@material-ui/icons/Copyright';\r\n\r\n// the main page with most of the logic\r\nfunction Dashboard() {\r\n  const [name, setName] = useState(() => {\r\n    return JSON.parse(sessionStorage.getItem('userData'));\r\n  });\r\n// 2 state variables\r\n  const [posts, setPosts] = React.useState({\r\n                          data: [],\r\n                          hasMore: true,\r\n                          nextPage: \"first\",\r\n                          first: true\r\n                          });\r\n  const [searchTopic, setSearchTopic] = React.useState(\"\");\r\n // useRef is a special state variable but doesn't cause re-render on update \r\n  const countRef = useRef(0);\r\n \r\n  // for popover handle\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  /* const handlePopClick = (event) => {  //see handlPost\r\n    setAnchorEl(event.currentTarget);\r\n  }; */\r\n  const handlePopClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n// end popHanlde\r\n\r\n  useEffect(() => {\r\n    countRef.current++;\r\n    console.log(`in useEffect ${countRef.current}`);\r\n    if (posts.first) {\r\n      const facebookGroupId = process.env.REACT_APP_FACEBOOK_GROUP_ID;\r\n      window.FB.api('/' + facebookGroupId ,\r\n        'GET',\r\n        {\"fields\":\"feed.limit(30){from,id,message,updated_time,comments.limit(10).filter(stream){created_time,from,message,id,like_count,comment_count},reactions,full_picture}\"}\r\n        , (response) => {addPosts(response.feed)});\r\n    }\r\n\r\n  });\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      flexGrow: 1,\r\n      overflow: \"hidden\",\r\n      background: \"linear-gradient(45deg, #fafafa 30%, #e3f2fd 90%)\",\r\n    },\r\n    paper: {\r\n      maxWidth: 500,\r\n      margin: `${theme.spacing(1)}px auto`,\r\n      padding: theme.spacing(1)\r\n    },\r\n    textField: {\r\n      marginLeft: theme.spacing(1),\r\n    },\r\n    typography: {\r\n      padding: theme.spacing(2),\r\n    },\r\n    form: {\r\n      padding: theme.spacing(0, 3),\r\n    },\r\n    cftd: {\r\n      backgroundColor: \"#FF4500\",\r\n      height: \"20px\",\r\n      width: \"35px\",\r\n      color: \"#FFFFFF\"\r\n    },\r\n    iconButton: {\r\n      padding: 10\r\n    },\r\n    outerColumn: {\r\n      borderRight: \"1px solid grey\",\r\n      borderBottom: \"1px solid grey\",\r\n      borderLeft: \"1px solid grey\"\r\n    },\r\n    centerColumn: {\r\n      marginLeft: theme.spacing(1)\r\n    }\r\n  }));\r\n\r\n // adds the respose to the state 'posts' after FB.API call\r\n  const addPosts = (response) => {\r\n    console.log(response);\r\n    if (!response.data) {\r\n      document.getElementById(\"mess\").innerHTML += response.error.message + '<br></br>';\r\n      return;\r\n    }\r\n    /* if the response has no data, just update posts.hasMore to false and return. Thre must be a simpler way, but I am just copying the entire state just to update one node.\r\n    Similar method used few times in this class */  \r\n    if (response.data.length === 0) {\r\n      let postsCopy = Object.assign({}, posts);\r\n      postsCopy.hasMore = false;\r\n      setPosts(postsCopy);\r\n      return;\r\n    }\r\n    const regexCftd = new RegExp(/#CFTD/i);\r\n    const regexTopic = new RegExp(searchTopic, 'i');\r\n    let selectCount = 0;\r\n    let postsCopy = Object.assign({}, posts);\r\n\r\n    response.data.forEach((dta, index, array) => {\r\n\r\n      let cftdPost = regexCftd.test(dta.message);\r\n      let aPost = {\r\n        from: dta.from ? dta.from : { name: \"Unknown\", id: \"9999999999999999\" },\r\n        id: dta.id,\r\n        message: dta.message,\r\n        updated_time: dta.updated_time,\r\n        comments: dta.comments ? dta.comments.data.length : 0,\r\n        reactions: dta.reactions ? dta.reactions.data.length : 0,\r\n        link: \"https://www.facebook.com/groups/cryptics/posts/\" + dta.id.substr(16) + \"/\",\r\n        full_picture: dta.full_picture ? dta.full_picture : \"\",\r\n        cftd: cftdPost,\r\n        feed: true,\r\n        // from localStorage\r\n        solve: localStorage.getItem(dta.id) ? JSON.parse(localStorage.getItem(dta.id))\r\n          : { ans: \"\", anno: \"\", solved: false },\r\n      };\r\n      /*  messed up a bit trying to cater for 2 possible scenarios in one function, need clean up at some stage\r\n      1. searchTopic null => select all posts and if cftd, select all comments of cftd post\r\n      2. searchTopic !null  => select posts that matches searchTopic \r\n                          if post doesn't match, check in all comments to the post */\r\n\r\n      if (searchTopic === \"\") {       //scenario 1\r\n        console.log(`Selected ${selectCount++}`);\r\n        postsCopy.data.push(aPost);\r\n\r\n        if (cftdPost && (aPost.comments > 0)) {\r\n          dta.comments.data.forEach(function (dtc, index, array) {\r\n            let cPost = {\r\n              from: dtc.from ? dtc.from : { name: \"Unknown\", id: \"9999999999999999\" },\r\n              id: dtc.id,\r\n              message: dtc.message,\r\n              updated_time: dtc.created_time,\r\n              comments: dtc.comment_count,\r\n                reactions: dtc.like_count,\r\n              link: \"https://www.facebook.com/groups/cryptics/posts/\" + dta.id.substr(16) + \"/\",\r\n              cftd: true,\r\n              feed: false,\r\n              solve: localStorage.getItem(dtc.id) ? JSON.parse(localStorage.getItem(dtc.id))\r\n                : { ans: \"\", anno: \"\", solved: false },\r\n            };\r\n            console.log(`Selected ${selectCount++}`);\r\n            postsCopy.data.push(cPost);\r\n          });\r\n        }\r\n      } else {           //scenario 2\r\n        let selectPost = regexTopic.test(aPost.message) || regexTopic.test(aPost.from.name);\r\n        let cftdPost = regexCftd.test(dta.message);\r\n        if (selectPost) {\r\n          console.log(`Selected ${selectCount++}`);\r\n          postsCopy.data.push(aPost);\r\n        } else {\r\n          if (aPost.comments > 0) {\r\n            dta.comments.data.every(function (dtc, index, array) {    // 'every' instead of foreach'\r\n              let selectComment = regexTopic.test(dtc.message) || regexTopic.test(dtc.from.name);\r\n              if (selectComment) {\r\n                let cPost = {\r\n                  from: dtc.from ? dtc.from : { name: \"Unknown\", id: \"9999999999999999\" },\r\n                  id: dtc.id,\r\n                  message: dtc.message,\r\n                  updated_time: dtc.created_time,\r\n                  comments: dtc.comment_count,\r\n                  reactions: dtc.like_count,\r\n                  link: \"https://www.facebook.com/groups/cryptics/posts/\" + dta.id.substr(16) + \"/\",\r\n                  cftd: cftdPost,\r\n                  feed: false,\r\n                  solve: localStorage.getItem(dtc.id) ? JSON.parse(localStorage.getItem(dtc.id))\r\n                    : { ans: \"\", anno: \"\", solved: false },\r\n                };\r\n                console.log(`Selected ${selectCount++}`);\r\n                postsCopy.data.push(aPost);\r\n                postsCopy.data.push(cPost);\r\n                return false;   // break at 1 find\r\n              }\r\n\r\n            });\r\n          }\r\n\r\n        }\r\n\r\n      };\r\n\r\n    })\r\n\r\n    postsCopy.first = false;\r\n    postsCopy.hasMore = (response.data.length === 0) ? false : true;\r\n    postsCopy.nextPage = response.paging ? response.paging.next.substr(33) : \"\";\r\n    setPosts(postsCopy);\r\n  };\r\n   \r\n\r\n\r\n  const fetchMoreData = () => {\r\n    console.log('in fetchMoreData');\r\n    if (posts.hasMore) {\r\n      window.FB.api(posts.nextPage, addPosts);\r\n      // if (posts.data.length === feedCount) {fetchMoreData()};\r\n    }\r\n  };\r\n\r\n  const handleAnsChange = (idx, key, val) => {\r\n    //console.log(idx +' ' + key + ' ' + val)\r\n    if (!posts.data[idx].solve.solved){\r\n      let postsCopy = Object.assign({}, posts);\r\n      postsCopy.data[idx].solve[key] = val\r\n      // save to localStorage\r\n      const jsonObj = JSON.stringify(postsCopy.data[idx].solve);\r\n      localStorage.setItem(postsCopy.data[idx].id, jsonObj);\r\n      // update state\r\n      setPosts(postsCopy);\r\n    }\r\n  };\r\n\r\n  const handleChangeTopic = (e) => {\r\n    setSearchTopic(e.target.value);\r\n    console.log(searchTopic);\r\n  };\r\n\r\n  const handleRefreshSearch = (e) => {\r\n    setPosts({\r\n      data: [],\r\n      hasMore: true,\r\n      nextPage: \"first\",\r\n      first: true\r\n      });\r\n  }\r\n\r\n  const handlePost = (idx, event) => {\r\n    if (posts.data[idx].solve.ans){\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n  // Group api does not allow posting a comment\r\n  /* -- start group comment\r\n    const cmnt = \"✴ \" + posts.data[idx].solve.ans + \" => \" + posts.data[idx].solve.anno;\r\n    const feedEdge = '/' + process.env.REACT_APP_FACEBOOK_GROUP_ID + '/feed';\r\n    const commentEdge = '/' + posts.data[idx].id + '/comments';\r\n    const commentCommentEdge = '/' + posts.data[idx].id + '/comments';\r\n    window.FB.api(\r\n      commentCommentEdge,\r\n      \"POST\",\r\n      {\r\n          \"message\": cmnt\r\n      },\r\n      function (response) {\r\n        if (response && !response.error) {\r\n          let postsCopy = Object.assign({}, posts);\r\n          postsCopy.data[idx].solve.solved = true;\r\n          // save to localStorage\r\n          const jsonObj = JSON.stringify(postsCopy.data[idx].solve);\r\n          localStorage.setItem(postsCopy.data[idx].id, jsonObj);\r\n          // update state\r\n          setPosts(postsCopy);\r\n        }\r\n        else {\r\n          alert (response.error.message)\r\n        }\r\n      }\r\n    ); -- end group comment */\r\n  \r\n  };\r\n\r\n\r\n  const classes = useStyles();\r\n  \r\n  return (\r\n\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <Grid container wrap=\"nowrap\" spacing={1}>\r\n          <Grid item>\r\n            <Avatar src={name.Image}></Avatar>\r\n          </Grid>\r\n          <Grid item xs>\r\n            <Typography align=\"left\" variant=\"subtitle2\">Welcome {name.Name}</Typography>\r\n          </Grid>\r\n          <Grid item  >\r\n          <TextField label=\"Search group\"\r\n          id=\"outlined-size-small\"\r\n          defaultValue=\"Search group\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n            value={searchTopic} onChange={handleChangeTopic}  />\r\n           <IconButton  onClick={handleRefreshSearch}>\r\n               <SearchIcon style={{color: \"CornflowerBlue\"}}  />\r\n           </IconButton>\r\n        </Grid>\r\n        </Grid>\r\n      </Paper>\r\n\r\n      <div>\r\n        <InfiniteScroll\r\n          dataLength={posts.data.length}\r\n          next={fetchMoreData}\r\n          hasMore={posts.hasMore}\r\n          loader={<h4>Loading...</h4>}\r\n          endMessage={\r\n            <p style={{ textAlign: \"center\" }}>\r\n              <b>You have reached the end</b>\r\n            </p>\r\n          }\r\n        >\r\n          {posts.data.map((dta, index) => (\r\n            <Paper className={classes.paper}>\r\n            <Grid container wrap=\"nowrap\" spacing={2} >\r\n              <Grid item>\r\n                <Avatar>{dta.from.name.split(\" \").map((n,i,a) => i === 0 || i+1 === a.length ? n[0] : null).join(\"\")}\r\n                </Avatar>\r\n              </Grid>\r\n    \r\n              <Grid item xs={12}>\r\n                <Typography align=\"left\">{dta.from.name}</Typography>\r\n                <Typography align=\"left\"\r\n                >\r\n                  <Link href={dta.link} target=\"_blank\" rel=\"noopener noreferrer\" variant=\"body2\">\r\n                    {dta.updated_time}\r\n                  </Link>\r\n                </Typography>\r\n              </Grid>\r\n             \r\n              <Grid\r\n                item\r\n                container\r\n                direction=\"column\"\r\n                alignItems=\"flex-end\"\r\n                justify=\"flex-start\"\r\n              >\r\n                {(dta.cftd && dta.feed) &&\r\n                <Chip size=\"small\" label=\"CFTD\" style={{background: \"CornflowerBlue\", color:\"White\"}} />\r\n                }\r\n                 {!dta.feed &&\r\n                <Tooltip title=\"Comment\">\r\n                   <CopyrightIcon color=\"primary\" />\r\n                </Tooltip>\r\n                }\r\n              </Grid>\r\n            </Grid>\r\n    \r\n            <Grid container wrap=\"nowrap\" spacing={2}>\r\n              <Grid item xs>\r\n                <Typography align=\"left\">{dta.message}</Typography>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            {dta.full_picture && \r\n            <grid item>\r\n              <img width=\"400\" height=\"300\" alt=\"pic\" src={dta.full_picture} />\r\n            </grid>\r\n\r\n            }\r\n    \r\n            <Grid container wrap=\"nowrap\" spacing={2}>\r\n              <Grid item xs>\r\n                <Typography align=\"left\" variant='body2'>likes {dta.reactions}</Typography>\r\n              </Grid>\r\n    \r\n              <Grid item xs>\r\n                <Typography align=\"right\" variant='body2' gutterBottom=\"true\">\r\n                  Comments {dta.comments}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n    \r\n            <Grid container spacing={1} style={{ borderTop: \"1px solid grey\" }}>\r\n              <Grid container direction=\"column\" item xs={1}>\r\n                <Grid\r\n                  item\r\n                  xs\r\n                  \r\n                  style={{ display: \"flex\", alignItems: \"center\" }}\r\n                >\r\n                  <Avatar className={classes.img} src={name.Image}></Avatar>\r\n                </Grid>\r\n              </Grid>\r\n    \r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                item\r\n                xs={9}\r\n              \r\n                alignItems=\"flex-start\"\r\n                justifyContents=\"flex-start\"\r\n              >\r\n                 <Grid item justify=\"left\">\r\n       \r\n                <form className={classes.form} noValidate autoComplete=\"off\">\r\n               <TextField fullWidth\r\n               style={{\r\n                disableUnderline: true,\r\n                background: 'linear-gradient(45deg, #eeeeee 30%, #e0e0e0 90%)',\r\n                borderRadius: \"30px 30px 30px 30px\",\r\n                padding: '0 30px',\r\n                \r\n                \r\n               }}\r\n               InputProps={{\r\n                disableUnderline: true,\r\n               }}\r\n                className={classes.textField}\r\n                 label=\"Answer\"\r\n                 fullwidth\r\n                 multiline\r\n                 maxRows={4}\r\n                 value={posts.data[index].solve.ans}\r\n                 onChange={(e) => handleAnsChange(index, \"ans\" , e.target.value)}\r\n                /> \r\n\r\n                {/*  <TextField\r\n                    className={classes.textField}\r\n                    label=\"Anno\"\r\n                    multiline\r\n                    maxRows={4}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    style={{ marginTop: \"4px\" }}\r\n                    value={posts.data[index].solve.anno}\r\n                    onChange={(e) => handleAnsChange(index, \"anno\" , e.target.value)}\r\n                    \r\n                  /> */}\r\n                  </form>\r\n                </Grid>\r\n              </Grid>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                item\r\n                xs={1}\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\"\r\n                }}\r\n              >\r\n                <Grid item>\r\n                  {dta.solve.solved ?\r\n                    <IconButton>\r\n                    <DoneIcon style={{color: \"CornflowerBlue\"}} />\r\n                  </IconButton>\r\n                  :\r\n                  <IconButton  onClick={(e) => handlePost(index, e)}>\r\n                    <SendIcon style={{color: \"CornflowerBlue\"}}  />\r\n                  </IconButton> \r\n                  }\r\n                  <Popover\r\n                  id={id}\r\n                  open={open}\r\n                  anchorEl={anchorEl}\r\n                  onClose={handlePopClose}\r\n                  anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'left',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                  }}\r\n                >\r\n                  <Typography className={classes.typography}>\r\n                    Facebook API doesn't allow posting comments.<br></br>\r\n                    The comment is saved in browser's local storage for reference\r\n                  </Typography>\r\n                </Popover>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            </Paper>\r\n          ))}\r\n        </InfiniteScroll>\r\n      </div>\r\n\r\n      <div id=\"mess\"></div>\r\n        {posts.hasMore && \r\n            <div>\r\n              <Button variant=\"outlined\" size=\"medium\" color=\"primary\" onClick={fetchMoreData}>\r\n                More\r\n              </Button>\r\n            </div>\r\n        }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard","import React from 'react';  \nimport './App.css';  \nimport Logintbyfacebook from './Loginbyfacebook';  \nimport Dashboard from './Dashboard';  \nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';   \nfunction App() {  \n  return (  \n    <React.Fragment>  \n   <div className=\"App\">    \n     {/* <Router basename=\"/searchccs\"> */}\n     <Router basename=\"/searchccs\">\n      <div className=\"container\">     \n        <Switch>      \n          <Route exact path='/' component={Logintbyfacebook} />      \n          <Route path='/Dashboard' component={Dashboard} />       \n        </Switch>      \n      </div>      \n    </Router>      \n    </div>    \n    </React.Fragment> \n  );  \n}  \n  \nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import 'bootstrap/dist/css/bootstrap.min.css'; \nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}