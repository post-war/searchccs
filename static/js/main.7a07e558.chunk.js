(this.webpackJsonpsearchccs=this.webpackJsonpsearchccs||[]).push([[0],{81:function(e,t,a){},82:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);a(76);var n=a(0),s=a.n(n),c=a(11),i=a.n(c),o=(a(81),a(82),a(56)),r=a(57),l=a(69),d=a(68),m=a(58),j=a.n(m),u=a(3),g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(r.a)(a,[{key:"signup",value:function(e){var t={Name:e.name,email:e.email,token:e.accessToken,Image:e.picture.data.url,ProviderId:"Facebook"};sessionStorage.setItem("userData",JSON.stringify(t)),this.props.history.push("/Dashboard")}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{style:{paddingTop:"20px"},className:"col-sm-12",children:[Object(u.jsx)("div",{className:"col-sm-4"}),Object(u.jsx)("div",{className:"col-sm-4",children:Object(u.jsx)(j.a,{buttonStyle:{padding:"6px"},appId:"194888908816770",autoLoad:!0,version:"10.0",fields:"name,email,picture",callback:function(t){console.log(t),e.signup(t)}})}),Object(u.jsx)("div",{className:"col-sm-4"})]})})})}}]),a}(n.Component),p=a(39),f=a(59),h=a(123),b=a(126),x=a(128),O=a(133),v=a(92),w=a(131),y=a(129),k=a(130),S=a(134),N=a(132),C=a(66),I=a.n(C),_=a(65),F=a.n(_),B=a(64),E=a.n(B);var M=function(){var e=Object(n.useState)((function(){return JSON.parse(sessionStorage.getItem("userData"))})),t=Object(p.a)(e,2),a=t[0],c=(t[1],s.a.useState({data:[],hasMore:!0,nextPage:"first",first:!0})),i=Object(p.a)(c,2),o=i[0],r=i[1],l=s.a.useState(""),d=Object(p.a)(l,2),m=d[0],j=d[1],g=Object(n.useRef)(0),C=s.a.useState(null),_=Object(p.a)(C,2),B=_[0],M=_[1],T=function(){M(null)},P=Boolean(B),D=P?"simple-popover":void 0;Object(n.useEffect)((function(){if(g.current++,console.log("in useEffect ".concat(g.current)),o.first){window.FB.api("/115073638555897/feed","GET",{fields:"from,id,message,updated_time,comments.limit(100).filter(stream){created_time,from,message,id,like_count,comment_count},reactions,full_picture"},L)}}));var J=Object(h.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",background:"linear-gradient(45deg, #fafafa 30%, #e3f2fd 90%)"},paper:{maxWidth:500,margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2)},textField:{marginLeft:e.spacing(1)},typography:{padding:e.spacing(2)},form:{padding:e.spacing(0,3)},cftd:{backgroundColor:"#FF4500",height:"20px",width:"35px",color:"#FFFFFF"},iconButton:{padding:10},outerColumn:{borderRight:"1px solid grey",borderBottom:"1px solid grey",borderLeft:"1px solid grey"},centerColumn:{marginLeft:e.spacing(1)}}})),L=function(e){if(console.log(e),0===e.data.length){var t=Object.assign({},o);return t.hasMore=!1,void r(t)}var a=new RegExp(/#CFTD/i),n=new RegExp(m,"i"),s=0,c=Object.assign({},o);e.data.forEach((function(e,t,i){var o=a.test(e.message),r={from:e.from?e.from:{name:"Unknown",id:"9999999999999999"},id:e.id,message:e.message,updated_time:e.updated_time,comments:e.comments?e.comments.data.length:0,reactions:e.reactions?e.reactions.data.length:0,link:"https://www.facebook.com/groups/cryptics/posts/"+e.id.substr(16)+"/",full_picture:e.full_picture?e.full_picture:"",cftd:o,solve:localStorage.getItem(e.id)?JSON.parse(localStorage.getItem(e.id)):{ans:"",anno:"",solved:!1}};if(""===m)console.log("Selected ".concat(s++)),c.data.push(r),o&&r.comments>0&&e.comments.data.forEach((function(t,a,n){var i={from:t.from?t.from:{name:"Unknown",id:"9999999999999999"},id:t.id,message:t.message,updated_time:t.created_time,comments:t.comment_count,reactions:t.like_count,link:"https://www.facebook.com/groups/cryptics/posts/"+e.id.substr(16)+"/",cftd:!0,solve:localStorage.getItem(t.id)?JSON.parse(localStorage.getItem(t.id)):{ans:"",anno:"",solved:!1}};console.log("Selected ".concat(s++)),c.data.push(i)}));else{var l=n.test(r.message)||n.test(r.from.name),d=a.test(e.message);l?(console.log("Selected ".concat(s++)),c.data.push(r)):r.comments>0&&e.comments.data.forEach((function(t,a,i){var o={from:t.from?t.from:{name:"Unknown",id:"9999999999999999"},id:t.id,message:t.message,updated_time:t.created_time,comments:t.comment_count,reactions:t.like_count,link:"https://www.facebook.com/groups/cryptics/posts/"+e.id.substr(16)+"/",cftd:d,solve:localStorage.getItem(t.id)?JSON.parse(localStorage.getItem(t.id)):{ans:"",anno:"",solved:!1}};(n.test(o.message)||n.test(o.from.name))&&(console.log("Selected ".concat(s++)),c.data.push(r),c.data.push(o))}))}})),c.first=!1,c.hasMore=0!==e.data.length,c.nextPage=e.paging?e.paging.next.substr(33):"",r(c)},R=J();return Object(u.jsxs)("div",{className:R.root,children:[Object(u.jsx)(b.a,{className:R.paper,children:Object(u.jsxs)(x.a,{container:!0,wrap:"nowrap",spacing:1,children:[Object(u.jsx)(x.a,{item:!0,children:Object(u.jsx)(O.a,{src:a.Image})}),Object(u.jsx)(x.a,{item:!0,xs:!0,children:Object(u.jsxs)(v.a,{align:"left",variant:"subtitle2",children:["Welcome ",a.Name]})}),Object(u.jsxs)(x.a,{item:!0,children:[Object(u.jsx)(w.a,{label:"Search group",id:"outlined-size-small",defaultValue:"Search group",variant:"outlined",size:"small",value:m,onChange:function(e){j(e.target.value),console.log(m)}}),Object(u.jsx)(y.a,{onClick:function(e){r({data:[],hasMore:!0,nextPage:"first",first:!0})},children:Object(u.jsx)(E.a,{style:{color:"CornflowerBlue"}})})]})]})}),Object(u.jsx)("div",{children:Object(u.jsx)(f.a,{dataLength:o.data.length,next:function(){console.log("in fetchMoreData"),o.hasMore&&window.FB.api(o.nextPage,L)},hasMore:o.hasMore,loader:Object(u.jsx)("h4",{children:"Loading..."}),endMessage:Object(u.jsx)("p",{style:{textAlign:"center"},children:Object(u.jsx)("b",{children:"You have reached the end"})}),children:o.data.map((function(e,t){return Object(u.jsxs)(b.a,{className:R.paper,children:[Object(u.jsxs)(x.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(u.jsx)(x.a,{item:!0,children:Object(u.jsx)(O.a,{children:e.from.name.split(" ").map((function(e,t,a){return 0===t||t+1===a.length?e[0]:null})).join("")})}),Object(u.jsxs)(x.a,{item:!0,xs:12,children:[Object(u.jsx)(v.a,{align:"left",children:e.from.name}),Object(u.jsx)(v.a,{align:"left",children:Object(u.jsx)(k.a,{href:e.link,target:"_blank",rel:"noopener noreferrer",variant:"body2",children:e.updated_time})})]}),Object(u.jsx)(x.a,{item:!0,container:!0,direction:"column",alignItems:"flex-end",justify:"flex-start",children:e.cftd&&Object(u.jsx)(S.a,{size:"small",label:"CFTD",style:{background:"CornflowerBlue",color:"White"}})})]}),Object(u.jsx)(x.a,{container:!0,wrap:"nowrap",spacing:2,children:Object(u.jsx)(x.a,{item:!0,xs:!0,children:Object(u.jsx)(v.a,{align:"left",children:e.message})})}),e.full_picture&&Object(u.jsx)("grid",{item:!0,children:Object(u.jsx)("img",{width:"400",height:"300",alt:"pic",src:e.full_picture})}),Object(u.jsxs)(x.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(u.jsx)(x.a,{item:!0,xs:!0,children:Object(u.jsxs)(v.a,{align:"left",variant:"body2",children:["likes ",e.reactions]})}),Object(u.jsx)(x.a,{item:!0,xs:!0,children:Object(u.jsxs)(v.a,{align:"right",variant:"body2",gutterBottom:"true",children:["Comments ",e.comments]})})]}),Object(u.jsxs)(x.a,{container:!0,spacing:1,style:{borderTop:"1px solid grey"},children:[Object(u.jsx)(x.a,{container:!0,direction:"column",item:!0,xs:1,children:Object(u.jsx)(x.a,{item:!0,xs:!0,style:{display:"flex",alignItems:"center"},children:Object(u.jsx)(O.a,{className:R.img,src:a.Image})})}),Object(u.jsx)(x.a,{container:!0,direction:"column",item:!0,xs:9,alignItems:"flex-start",justifyContents:"flex-start",children:Object(u.jsx)(x.a,{item:!0,justify:"left",children:Object(u.jsx)("form",{className:R.form,noValidate:!0,autoComplete:"off",children:Object(u.jsx)(w.a,{fullWidth:!0,style:{disableUnderline:!0,background:"linear-gradient(45deg, #eeeeee 30%, #e0e0e0 90%)",borderRadius:"30px 30px 30px 30px",padding:"0 30px"},InputProps:{disableUnderline:!0},className:R.textField,label:"Answer",fullwidth:!0,multiline:!0,maxRows:4,value:o.data[t].solve.ans,onChange:function(e){return function(e,t,a){if(!o.data[e].solve.solved){var n=Object.assign({},o);n.data[e].solve[t]=a;var s=JSON.stringify(n.data[e].solve);localStorage.setItem(n.data[e].id,s),r(n)}}(t,"ans",e.target.value)}})})})}),Object(u.jsx)(x.a,{container:!0,direction:"column",item:!0,xs:1,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(u.jsxs)(x.a,{item:!0,children:[e.solve.solved?Object(u.jsx)(y.a,{children:Object(u.jsx)(F.a,{style:{color:"CornflowerBlue"}})}):Object(u.jsx)(y.a,{onClick:function(e){return a=t,n=e,void(o.data[a].solve.ans&&M(n.currentTarget));var a,n},children:Object(u.jsx)(I.a,{style:{color:"CornflowerBlue"}})}),Object(u.jsx)(N.a,{id:D,open:P,anchorEl:B,onClose:T,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(u.jsxs)(v.a,{className:R.typography,children:["Facebook API doesn't allow posting comments.",Object(u.jsx)("br",{}),"The comment is saved in browser's local storage for reference"]})})]})})]})]})}))})})]})},T=a(67),P=a(12);var D=function(){return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(T.a,{children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)(P.c,{children:[Object(u.jsx)(P.a,{exact:!0,path:"/",component:g}),Object(u.jsx)(P.a,{path:"/Dashboard",component:M})]})})})})})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,135)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))};i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),J()}},[[90,1,2]]]);
//# sourceMappingURL=main.7a07e558.chunk.js.map